(function(a){a.fn.extend({je_compare:function(c){var e,d,f,b;e={caption:false,orientation:false,start_x:0.5,start_y:0.5};d=a.extend(e,c);f=function(p,i,j,g){var o,q,h,l,k,n,m;q=p.width();h=p.height();l=p.children("img:eq(2)").attr("alt");k=p.children("img:eq(3)").attr("alt");n=p.children(".jc-layer_tl");if(i){n.height(g)}else{n.width(j)}if(l){m=p.children(".jc-layer_tr");if(i){n.width(j);m.width(j)}else{n.height(g);m.height(g)}}if(k){n=p.children(".jc-layer_bl");if(i){n.height(g)}else{n.width(j)}}p.children(".jc-caption_tl").css({bottom:h-g,right:q-j});n=p.children(".jc-caption_tr");if(i){n.css({top:g,right:q-j})}else{n.css({bottom:h-g,left:j})}n=p.children(".jc-caption_bl");if(k){if(i){n.css({bottom:h-g,left:j})}else{n.css({top:g,right:q-j})}}else{if(i){o=n.innerHeight();n.css({top:g-o*0.5,left:j})}else{o=n.innerWidth();n.css({top:g,right:q-o*0.5-j})}}p.children(".jc-caption_br").css({top:g,left:j})};b=this.each(function(){var i,u,r,n,t,j,w,s,m,g,v,l,h,x,k,q,p;i=d;u=a(this);r=u.children("img");n=a(r[0]);if(!r[0].complete){n.load(function(){var z,B,y,o,A;z=a(this);B=z.parent();o=z.width();A=z.height();B.width(o);B.height(A);y=B.children(".jc-layer");y.width(o);y.height(A);f(B,i.orientation,o*i.start_x,A*i.start_y)})}t=n.attr("src");j=u.children("img:eq(1)").attr("src");w=u.children("img:eq(2)").attr("src");s=u.children("img:eq(3)").attr("src");m=n.attr("alt");g=u.children("img:eq(1)").attr("alt");v=u.children("img:eq(2)").attr("alt");l=u.children("img:eq(3)").attr("alt");h=n.width();x=n.height();k={borderTopWidth:"0px",borderLeftWidth:"0px",borderRightWidth:"0px"};q={borderTopWidth:"0px",borderBottomWidth:"0px",borderLeftWidth:"0px"};u.width(h);u.height(x);u.children("img").hide();u.css({overflow:"hidden",position:"relative",cursor:"crosshair"});if(!w){if(i.orientation){u.css("cursor","row-resize")}else{u.css("cursor","col-resize")}}else{u.css("cursor","crosshair")}u.append('<div class="jc-tbg"></div>');u.append('<div class="jc-layer jc-layer_tl"></div>');u.append('<div class="jc-layer jc-layer_tr"></div>');if(w){u.append('<div class="jc-layer jc-layer_bl"></div>');u.append('<div class="jc-caption jc-caption_bl">'+v+"</div>")}if(s){u.append('<div class="jc-layer jc-layer_br"></div>');u.append('<div class="jc-caption jc-caption_br">'+l+"</div>")}u.append('<div class="jc-caption jc-caption_tl">'+m+"</div>");u.append('<div class="jc-caption jc-caption_tr">'+g+"</div>");u.children(".jc-tbg").css("position","absolute");u.children(".jc-tbg").css({zIndex:0,border:"0px",backgroundImage:"inherit"});u.children(".jc-tbg").width(h);u.children(".jc-tbg").height(x);p=u.children(".jc-layer").css("position","absolute");p.width(h);p.height(x);u.children(".jc-layer_tl").css({backgroundImage:"url("+t+")",zIndex:4});u.children(".jc-layer_tr").css({backgroundImage:"url("+j+")",zIndex:3});u.children(".jc-layer_bl").css({backgroundImage:"url("+w+")",zIndex:2});u.children(".jc-layer_br").css({backgroundImage:"url("+s+")",zIndex:1});u.children(".jc-layer_tl").css({borderLeftWidth:"0px",borderTopWidth:"0px"});if(i.orientation){u.children(".jc-layer_bl").css(k);u.children(".jc-layer_tr").css(q)}else{u.children(".jc-layer_tr").css(k);u.children(".jc-layer_bl").css(q)}u.children(".jc-layer_br").css({border:"0px"});u.children(".jc-caption").toggle(i.caption).css({zIndex:5,position:"absolute"});f(u,i.orientation,h*i.start_x,x*i.start_y);u.bind("vmousemove",function(C){var B,I,F,E,D,J,H,y,o,G,A,z;B=a(this);G=B.children(".jc-layer_tl");A=G.css("borderRightWidth");I=parseInt(A,10);z=G.css("borderBottomWidth");F=parseInt(z,10);E=B.offset().left;D=B.offset().top;J=C.pageX-I*0.5;H=C.pageY-F*0.5;y=J-E;o=H-D;f(B,i.orientation,y,o);C.preventDefault()})});return b}})}(jQuery));